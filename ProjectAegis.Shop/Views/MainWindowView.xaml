<ma:MetroWindow x:Class="ProjectAegis.Shop.Views.MainWindowView"
                xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:cal="http://www.caliburnproject.org"
                xmlns:controls="clr-namespace:ProjectAegis.Shop.Core.Controls"
                xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
                xmlns:localization="clr-namespace:ProjectAegis.Localization.Library;assembly=ProjectAegis.Localization.Library"
                xmlns:ma="http://metro.mahapps.com/winfx/xaml/controls"
                xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                Width="970.917"
                Height="667.999"
                Icon="../Resources/Icons/Icon.ico"
                mc:Ignorable="d">

    <ma:MetroWindow.RightWindowCommands>
        <ma:WindowCommands>
            <StackPanel Orientation="Horizontal">
                <TextBlock Margin="0,0,10,0"
                           VerticalAlignment="Center"
                           Text="{localization:Translate LanguageText}" />
                <ComboBox Width="185"
                          IsSynchronizedWithCurrentItem="True"
                          ItemsSource="{Binding Path=Languages,
                                                UpdateSourceTrigger=PropertyChanged}"
                          SelectedItem="{Binding Path=CurrentLanguage,
                                                 Mode=TwoWay,
                                                 UpdateSourceTrigger=PropertyChanged}">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Image Height="15"
                                       Margin="0,0,5,0"
                                       Source="../Resources/Icons/style_go.png" />
                                <TextBlock Margin="3"
                                           Foreground="Black"
                                           Text="{Binding NativeName}" />
                            </StackPanel>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
            </StackPanel>
        </ma:WindowCommands>
    </ma:MetroWindow.RightWindowCommands>

    <Grid Name="LayoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <Menu Grid.Row="0"
              Grid.Column="0"
              Grid.ColumnSpan="2"
              Margin="3,0,0,0"
              Background="Transparent">
            <MenuItem Header="{localization:Translate FileText}">
                <MenuItem.Icon>
                    <Image Source="../Resources/Icons/folder.png" />
                </MenuItem.Icon>
                <MenuItem Header="{localization:Translate OpenText}">
                    <MenuItem.Icon>
                        <Image Source="../Resources/Icons/folder_add.png" />
                    </MenuItem.Icon>

                    <MenuItem Header="Client">
                        <MenuItem.Icon>
                            <Image Source="../Resources/Icons/wrench_orange.png" />
                        </MenuItem.Icon>
                        <MenuItem cal:Message.Attach="Load(126, 1)" Header="1.2.6">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Load(142, 1)" Header="1.4.2">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Load(144, 1)" Header="1.4.4">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Load(152, 1)" Header="1.5.2">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Load(153, 1)" Header="1.5.3">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>

                    <MenuItem Header="Server">
                        <MenuItem.Icon>
                            <Image Source="../Resources/Icons/wrench_orange.png" />
                        </MenuItem.Icon>

                        <MenuItem cal:Message.Attach="Load(142, 2)" Header="1.4.2">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Load(144, 2)" Header="1.4.4">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Load(152, 2)" Header="1.5.2">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Load(153, 2)" Header="1.5.3">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>
                </MenuItem>

                <MenuItem cal:Message.Attach="Save()" Header="{localization:Translate SaveText}">
                    <MenuItem.Icon>
                        <Image Source="../Resources/Icons/disk.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem Header="{localization:Translate SaveAsText}">
                    <MenuItem.Icon>
                        <Image Source="../Resources/Icons/disk.png" />
                    </MenuItem.Icon>

                    <MenuItem Header="Client">
                        <MenuItem.Icon>
                            <Image Source="../Resources/Icons/wrench_orange.png" />
                        </MenuItem.Icon>
                        <MenuItem cal:Message.Attach="Save(126, 1)" Header="1.2.6">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Save(142, 1)" Header="1.4.2">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Save(144, 1)" Header="1.4.4">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Save(152, 1)" Header="1.5.2">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Save(153, 1)" Header="1.5.3">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>

                    <MenuItem Header="Server">
                        <MenuItem.Icon>
                            <Image Source="../Resources/Icons/wrench_orange.png" />
                        </MenuItem.Icon>

                        <MenuItem cal:Message.Attach="Save(142, 2)" Header="1.4.2">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Save(144, 2)" Header="1.4.4">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Save(152, 2)" Header="1.5.2">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem cal:Message.Attach="Save(153, 2)" Header="1.5.3">
                            <MenuItem.Icon>
                                <Image Source="../Resources/Icons/wrench.png" />
                            </MenuItem.Icon>
                        </MenuItem>
                    </MenuItem>
                </MenuItem>
                <Separator />
                <MenuItem cal:Message.Attach="Exit()" Header="{localization:Translate ExitText}">
                    <MenuItem.Icon>
                        <Image Source="../Resources/Icons/door_in.png" />
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
            <MenuItem Header="{localization:Translate EditText}">
                <MenuItem.Icon>
                    <Image Source="../Resources/Icons/folder_wrench.png" />
                </MenuItem.Icon>
                <MenuItem cal:Message.Attach="Unload()" Header="{localization:Translate UnloadFile}">
                    <MenuItem.Icon>
                        <Image Source="../Resources/Icons/bullet_wrench.png" />
                    </MenuItem.Icon>
                </MenuItem>
                <MenuItem cal:Message.Attach="AddItems()"
                          Header="{localization:Translate AddFromElementText}"
                          IsEnabled="{Binding Path=AddItemsAvalaibility,
                                              UpdateSourceTrigger=PropertyChanged}">
                    <MenuItem.Icon>
                        <Image Source="../Resources/Icons/bullet_wrench.png" />
                    </MenuItem.Icon>
                </MenuItem>
            </MenuItem>
        </Menu>

        <Grid Grid.Row="0"
              Grid.Column="2"
              Margin="3,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>


            <Grid Grid.Column="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock VerticalAlignment="Center" Text="{localization:Translate GetDataFromText}" />

                <ComboBox x:Name="InformationSources"
                          Grid.Column="1"
                          MinWidth="120"
                          VerticalAlignment="Center">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <Image Margin="0,0,5,0" Source="../Resources/Icons/cog_add.png" />
                                <TextBlock Foreground="Black" Text="{Binding}" />
                            </StackPanel>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
                <Button x:Name="GetItemInformation"
                        Grid.Column="2"
                        Height="26"
                        Margin="2,0,0,0"
                        VerticalAlignment="Center"
                        Focusable="False">
                    <StackPanel Orientation="Horizontal">
                        <Image Source="../Resources/Icons/package_go.png" />
                    </StackPanel>
                </Button>
            </Grid>

            <StackPanel Grid.Column="1"
                        VerticalAlignment="Center"
                        Orientation="Horizontal">
                <TextBlock FontWeight="SemiBold" Text="© p.daniil, 2016 " />
                <TextBlock Text="{localization:Translate BuildText}" />
                <TextBlock FontWeight="SemiBold" Text="{Binding Path=BuildVersion}" />
            </StackPanel>

        </Grid>

        <Grid Grid.Row="1"
              Grid.Column="0"
              Margin="3,5,1,5">

            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>

            <Grid Grid.Row="0" Margin="0,0,0,1">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <ListView x:Name="Categories"
                          Grid.Row="0"
                          MinWidth="170"
                          BorderBrush="#FFABADB3"
                          BorderThickness="1">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>

                                <Image Margin="1" Source="../Resources/Icons/package.png" />

                                <TextBlock x:Name="Name"
                                           Grid.Column="1"
                                           Margin="6,0,0,0"
                                           VerticalAlignment="Center"
                                           Text="{Binding Path=Name}" />
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>
                <TextBox x:Name="SelectedCategoryName"
                         Grid.Row="1"
                         Margin="0,2,0,0" />
            </Grid>

            <Grid Grid.Row="1" Margin="0,1,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <ListView Name="SubCategories"
                          Grid.Row="0"
                          MinWidth="170"
                          BorderBrush="#FFABADB3"
                          BorderThickness="1">
                    <ListView.ContextMenu>
                        <ContextMenu>
                            <MenuItem cal:Message.Attach="AddSubCategory()"
                                      Header="{localization:Translate AddSubCategoryText}"
                                      Padding="2">
                                <MenuItem.Icon>
                                    <Image Source="../Resources/Icons/add.png" />
                                </MenuItem.Icon>
                            </MenuItem>
                            <MenuItem Header="{localization:Translate RemoveSubCategoryText}" Padding="2">
                                <i:Interaction.Triggers>
                                    <i:EventTrigger EventName="Click">
                                        <cal:ActionMessage MethodName="RemoveSubCategories">
                                            <cal:Parameter Value="{Binding RelativeSource={RelativeSource AncestorType=ContextMenu}, Path=PlacementTarget.SelectedItems, UpdateSourceTrigger=PropertyChanged}" />
                                        </cal:ActionMessage>
                                    </i:EventTrigger>
                                </i:Interaction.Triggers>
                                <MenuItem.Icon>
                                    <Image Source="../Resources/Icons/delete.png" />
                                </MenuItem.Icon>
                            </MenuItem>
                        </ContextMenu>
                    </ListView.ContextMenu>
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>

                                <Image Margin="1" Source="../Resources/Icons/package.png" />
                                <TextBlock Grid.Column="1"
                                           Margin="6,0,0,0"
                                           VerticalAlignment="Center"
                                           Text="{Binding Path=Name}" />
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

                <TextBox Grid.Row="1"
                         Margin="0,2,0,0"
                         Text="{Binding Path=SelectedSubCategoryName,
                                        Mode=TwoWay}" />
            </Grid>
        </Grid>

        <ListView x:Name="Items"
                  Grid.Row="1"
                  Grid.Column="1"
                  MinWidth="300"
                  MaxWidth="300"
                  Margin="1,5"
                  Background="Black">
            <ListView.ContextMenu>
                <ContextMenu Padding="2">
                    <MenuItem cal:Message.Attach="AddItem()"
                              Header="{localization:Translate AddItemText}"
                              Padding="2">
                        <MenuItem.Icon>
                            <Image Source="../Resources/Icons/add.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                    <MenuItem Header="{localization:Translate RemoveItemText}" Padding="2">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="Click">
                                <cal:ActionMessage MethodName="RemoveItems">
                                    <cal:Parameter Value="{Binding RelativeSource={RelativeSource AncestorType=ContextMenu}, Path=PlacementTarget.SelectedItems, UpdateSourceTrigger=PropertyChanged}" />
                                </cal:ActionMessage>
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                        <MenuItem.Icon>
                            <Image Source="../Resources/Icons/delete.png" />
                        </MenuItem.Icon>
                    </MenuItem>
                </ContextMenu>
            </ListView.ContextMenu>

            <ListView.ItemTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <Image Height="20"
                               Margin="1"
                               Source="{Binding Path=TextureForIcon,
                                                Converter={StaticResource ImageConverter}}" />

                        <TextBlock Grid.Column="1"
                                   Margin="3,0,0,0"
                                   VerticalAlignment="Center"
                                   Foreground="White"
                                   Text="[" />
                        <TextBlock Grid.Column="2"
                                   VerticalAlignment="Center"
                                   Foreground="White"
                                   Text="{Binding Path=Id}" />
                        <TextBlock Grid.Column="3"
                                   Margin="0,0,3,0"
                                   VerticalAlignment="Center"
                                   Foreground="White"
                                   Text="]" />

                        <TextBlock Grid.Column="4"
                                   VerticalAlignment="Center"
                                   Foreground="White"
                                   Text="{Binding Path=Name}" />
                    </Grid>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>

        <ScrollViewer Grid.Row="1"
                      Grid.RowSpan="2"
                      Grid.Column="2"
                      Margin="1,5,3,5"
                      VerticalScrollBarVisibility="Auto">

            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <Expander Grid.Row="0"
                          BorderBrush="#FFABADB3"
                          BorderThickness="1"
                          Header="{localization:Translate MainText}"
                          IsExpanded="True">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Grid VerticalAlignment="Center" DataContext="{Binding Path=SelectedItem, UpdateSourceTrigger=PropertyChanged}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="2*" />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>

                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>

                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>


                                <TextBlock Grid.Row="0"
                                           Grid.Column="0"
                                           Margin="0,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate ItemIdText}" />


                                <ma:NumericUpDown Name="ItemId"
                                                  Grid.Row="0"
                                                  Grid.Column="1"
                                                  Margin="1"
                                                  TextAlignment="Left"
                                                  Value="{Binding Path=ItemId,
                                                                  Mode=TwoWay}" />

                                <TextBlock Grid.Row="1"
                                           Grid.Column="0"
                                           Margin="0,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate ItemAmountText}" />
                                <ma:NumericUpDown Grid.Row="1"
                                                  Grid.Column="1"
                                                  Margin="1"
                                                  TextAlignment="Left"
                                                  Value="{Binding Path=ItemAmount,
                                                                  Mode=TwoWay}" />
                                <TextBlock Grid.Row="2"
                                           Grid.Column="0"
                                           Margin="0,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate ItemNameText}" />
                                <TextBox Grid.Row="2"
                                         Grid.Column="1"
                                         Height="26"
                                         Margin="1"
                                         VerticalContentAlignment="Center"
                                         Text="{Binding Path=Name,
                                                        Mode=TwoWay,
                                                        UpdateSourceTrigger=PropertyChanged}" />
                                <TextBlock Grid.Row="3"
                                           Grid.Column="0"
                                           Margin="0,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate ItemIconText}" />


                                <TextBox Grid.Row="3"
                                         Grid.Column="1"
                                         Margin="1"
                                         Style="{DynamicResource ButtonCommandMetroTextBox}"
                                         Text="{Binding Path=Texture,
                                                        Mode=TwoWay}">
                                    <ma:TextBoxHelper.ButtonContent>
                                        <Image Height="20" Source="/Resources/Icons/bullet_wrench.png" />
                                    </ma:TextBoxHelper.ButtonContent>

                                </TextBox>

                                <TextBlock Grid.Row="4"
                                           Grid.Column="0"
                                           Margin="0,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate PeriodLimitText}" />


                                <TextBox Grid.Row="4"
                                         Grid.Column="1"
                                         Height="26"
                                         Margin="1"
                                         VerticalContentAlignment="Center"
                                         IsEnabled="{Binding RelativeSource={RelativeSource FindAncestor,
                                                                                            AncestorType={x:Type Window}},
                                                             Path=DataContext.Version153Sections,
                                                             UpdateSourceTrigger=PropertyChanged}"
                                         IsReadOnly="{Binding RelativeSource={RelativeSource FindAncestor,
                                                                                             AncestorType={x:Type Window}},
                                                              Path=DataContext.Version153Sections,
                                                              UpdateSourceTrigger=PropertyChanged}"
                                         Text="{Binding Path=PeriodLimit,
                                                        Mode=TwoWay,
                                                        UpdateSourceTrigger=PropertyChanged}" />

                                <TextBlock Grid.Row="5"
                                           Grid.Column="0"
                                           Margin="0,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate AvailableFrequencyText}" />

                                <TextBox Grid.Row="5"
                                         Grid.Column="1"
                                         Height="26"
                                         Margin="1"
                                         VerticalContentAlignment="Center"
                                         IsEnabled="{Binding RelativeSource={RelativeSource FindAncestor,
                                                                                            AncestorType={x:Type Window}},
                                                             Path=DataContext.Version153Sections,
                                                             UpdateSourceTrigger=PropertyChanged}"
                                         IsReadOnly="{Binding RelativeSource={RelativeSource FindAncestor,
                                                                                             AncestorType={x:Type Window}},
                                                              Path=DataContext.Version153Sections,
                                                              UpdateSourceTrigger=PropertyChanged}"
                                         Text="{Binding Path=AvailableFrequency,
                                                        Mode=TwoWay,
                                                        UpdateSourceTrigger=PropertyChanged}" />

                            </Grid>

                            <Border Grid.Column="1"
                                    Margin="1"
                                    Background="Black"
                                    BorderBrush="#FFABADB3"
                                    BorderThickness="1">
                                <Image Source="{Binding Path=TextureForIcon, Converter={StaticResource ImageConverter}}" Stretch="Uniform" />
                            </Border>

                        </Grid>

                        <Grid Grid.Row="1"
                              Margin="0,2,0,0"
                              DataContext="{Binding Path=SelectedItem,
                                                    UpdateSourceTrigger=PropertyChanged}">

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>


                            <TextBox Name="Description"
                                     Grid.Column="0"
                                     Height="135"
                                     Margin="0,0,2,0"
                                     Text="{Binding Path=Description,
                                                    Mode=TwoWay,
                                                    UpdateSourceTrigger=PropertyChanged}"
                                     TextWrapping="Wrap" />

                            <RichTextBox Name="ColorDescription"
                                         Grid.Column="1"
                                         Height="135"
                                         controls:RichTextBoxAttached.BindableDocument="{Binding Path=ColorizedDescription}"
                                         Background="Black"
                                         BorderBrush="#FFABADB3" />
                        </Grid>

                        <Grid Grid.Row="2" Margin="1,2,1,1">

                            <Grid.ColumnDefinitions>
                                <ColumnDefinition />
                                <ColumnDefinition />
                            </Grid.ColumnDefinitions>

                            <Expander Grid.Column="0"
                                      Margin="0,0,2,0"
                                      BorderBrush="#FFABADB3"
                                      BorderThickness="1"
                                      Header="{localization:Translate GiftText}"
                                      IsEnabled="{Binding Path=Version144Sections,
                                                          UpdateSourceTrigger=PropertyChanged}"
                                      Padding="2">
                                <Grid DataContext="{Binding Path=SelectedItem, UpdateSourceTrigger=PropertyChanged}">
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>

                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>

                                    <TextBlock Grid.Row="0"
                                               Grid.Column="0"
                                               Margin="0,0,3,0"
                                               VerticalAlignment="Center"
                                               Text="{localization:Translate GiftIdText}" />

                                    <TextBox Name="GiftIdBox"
                                             Grid.Row="0"
                                             Grid.Column="1"
                                             Margin="1"
                                             Text="{Binding Path=GiftId,
                                                            Mode=TwoWay}" />
                                    <TextBlock Grid.Row="1"
                                               Grid.Column="0"
                                               Margin="0,0,3,0"
                                               VerticalAlignment="Center"
                                               Text="{localization:Translate GiftAmountText}" />
                                    <TextBox Name="GiftAmountBox"
                                             Grid.Row="1"
                                             Grid.Column="1"
                                             Margin="1"
                                             Text="{Binding Path=GiftAmount,
                                                            Mode=TwoWay}" />
                                    <TextBlock Grid.Row="2"
                                               Grid.Column="0"
                                               Margin="0,0,3,0"
                                               VerticalAlignment="Center"
                                               Text="{localization:Translate GiftTimeText}" />
                                    <TextBox Name="GiftDurationBox"
                                             Grid.Row="2"
                                             Grid.Column="1"
                                             Margin="1"
                                             Text="{Binding Path=GiftDuration,
                                                            Mode=TwoWay}" />
                                    <TextBlock Grid.Row="3"
                                               Grid.Column="0"
                                               Margin="0,0,3,0"
                                               VerticalAlignment="Center"
                                               Text="{localization:Translate GiftPriceText}" />
                                    <TextBox Name="LogPriceBox"
                                             Grid.Row="3"
                                             Grid.Column="1"
                                             Margin="1"
                                             Text="{Binding Path=LogPrice,
                                                            Mode=TwoWay}" />
                                </Grid>
                            </Expander>
                            <Expander x:Name="OwnerNpcsSection"
                                      Grid.Column="1"
                                      Header="{localization:Translate OwnerNpcsText}"
                                      IsEnabled="{Binding Path=Version152Sections,
                                                          UpdateSourceTrigger=PropertyChanged}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition />
                                        <ColumnDefinition />
                                        <ColumnDefinition />
                                        <ColumnDefinition />
                                    </Grid.ColumnDefinitions>

                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto" />
                                        <RowDefinition Height="Auto" />
                                    </Grid.RowDefinitions>

                                    <TextBox Grid.Row="0"
                                             Grid.Column="0"
                                             Margin="1"
                                             Text="{Binding Path=OwnerNpcs[0]}" />
                                    <TextBox Grid.Row="0"
                                             Grid.Column="1"
                                             Margin="1"
                                             Text="{Binding Path=OwnerNpcs[1]}" />
                                    <TextBox Grid.Row="0"
                                             Grid.Column="2"
                                             Margin="1"
                                             Text="{Binding Path=OwnerNpcs[2]}" />
                                    <TextBox Grid.Row="0"
                                             Grid.Column="3"
                                             Margin="1"
                                             Text="{Binding Path=OwnerNpcs[3]}" />

                                    <TextBox Grid.Row="1"
                                             Grid.Column="0"
                                             Margin="1"
                                             Text="{Binding Path=OwnerNpcs[4]}" />
                                    <TextBox Grid.Row="1"
                                             Grid.Column="1"
                                             Margin="1"
                                             Text="{Binding Path=OwnerNpcs[5]}" />
                                    <TextBox Grid.Row="1"
                                             Grid.Column="2"
                                             Margin="1"
                                             Text="{Binding Path=OwnerNpcs[6]}" />
                                    <TextBox Grid.Row="1"
                                             Grid.Column="3"
                                             Margin="1"
                                             Text="{Binding Path=OwnerNpcs[7]}" />
                                </Grid>
                            </Expander>
                        </Grid>
                    </Grid>
                </Expander>
                <Expander Grid.Row="1"
                          Margin="0,2,0,0"
                          BorderBrush="#FFABADB3"
                          Header="{localization:Translate PricesText}"
                          IsExpanded="True">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition />
                        </Grid.ColumnDefinitions>

                        <ListView x:Name="Prices" Width="120">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{localization:Translate PriceItemText}" />
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>

                        <GroupBox Name="PriceAbout"
                                  Grid.Column="1"
                                  Margin="3,0"
                                  BorderBrush="#FFABADB3"
                                  DataContext="{Binding Path=SelectedPrice}"
                                  Header="{localization:Translate PriceItemDetailsText}">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Row="0"
                                           Grid.Column="0"
                                           Margin="0,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate PriceItemCostText}" />
                                <TextBox Grid.Row="0"
                                         Grid.Column="1"
                                         Margin="1"
                                         Text="{Binding Path=Cost}"
                                         TextAlignment="Left" />
                                <TextBlock Grid.Row="0"
                                           Grid.Column="2"
                                           Margin="1,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate PriceItemStartDateText}" />

                                <TextBox Grid.Row="0"
                                         Grid.Column="3"
                                         Margin="1"
                                         VerticalAlignment="Center"
                                         Text="{Binding Path=StartDate}" />

                                <TextBlock Grid.Row="1"
                                           Grid.Column="0"
                                           Margin="0,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate PriceItemDurationText}" />
                                <TextBox Grid.Row="1"
                                         Grid.Column="1"
                                         Margin="1"
                                         Text="{Binding Path=Duration}" />
                                <TextBlock Grid.Row="1"
                                           Grid.Column="2"
                                           Margin="1,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate PriceItemExpireDateText}" />
                                <TextBox Grid.Row="1"
                                         Grid.Column="3"
                                         Margin="1"
                                         Text="{Binding Path=ExpireDate}" />
                                <TextBlock Grid.Row="2"
                                           Grid.Column="0"
                                           Margin="0,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate PriceItemControlTypeText}" />
                                <TextBox Grid.Row="2"
                                         Grid.Column="1"
                                         Margin="1"
                                         Text="{Binding Path=ControlType}" />
                                <TextBlock Grid.Row="2"
                                           Grid.Column="2"
                                           Margin="1,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate PriceItemDayText}" />
                                <TextBox Grid.Row="2"
                                         Grid.Column="3"
                                         Margin="1"
                                         Text="{Binding Path=Day}" />
                                <TextBlock Grid.Row="3"
                                           Grid.Column="0"
                                           Margin="0,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate PriceItemStatusText}" />
                                <TextBox Grid.Row="3"
                                         Grid.Column="1"
                                         Margin="1"
                                         Text="{Binding Path=Status}" />
                                <TextBlock Grid.Row="3"
                                           Grid.Column="2"
                                           Margin="1,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate PriceItemFlagText}" />
                                <TextBox Grid.Row="3"
                                         Grid.Column="3"
                                         Margin="1"
                                         Text="{Binding Path=Flags}" />

                                <TextBlock Grid.Row="4"
                                           Grid.Column="0"
                                           Margin="0,0,3,0"
                                           VerticalAlignment="Center"
                                           Text="{localization:Translate VipLevelText}" />
                                <TextBox Grid.Row="4"
                                         Grid.Column="1"
                                         Margin="1"
                                         IsEnabled="{Binding RelativeSource={RelativeSource FindAncestor,
                                                                                            AncestorType={x:Type Window}},
                                                             Path=DataContext.Version153Sections,
                                                             UpdateSourceTrigger=PropertyChanged}"
                                         IsReadOnly="{Binding RelativeSource={RelativeSource FindAncestor,
                                                                                             AncestorType={x:Type Window}},
                                                              Path=DataContext.Version153Sections,
                                                              UpdateSourceTrigger=PropertyChanged}"
                                         Text="{Binding Path=VipLevel}" />
                            </Grid>
                        </GroupBox>
                    </Grid>
                </Expander>
            </Grid>
        </ScrollViewer>
    </Grid>
</ma:MetroWindow>

